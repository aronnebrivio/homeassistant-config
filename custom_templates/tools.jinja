{% macro absolute_humidity(temp,hum) -%}
  {% if states(hum)|float==0 or states(temp)=='unknown' -%}
    'unknown'
  {%- else %}
      {{ (states(hum)|float * 6.112 * 2.1674 * e**((states(temp)|float*17.67)/(states(temp)|float+243.5)) / (states(temp)|float+273.15))|round(2) }}
  {% endif %}
{%- endmacro %}
